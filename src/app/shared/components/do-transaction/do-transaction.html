<div [formGroup]="form" class="bg-white p-4 rounded-xl max-w-md mx-auto">


  <hlm-tabs tab="depot" class="w-full">
    <hlm-tabs-list class="grid w-full grid-cols-3 bg-slate-100 p-1 rounded-lg" aria-label="tabs">
      <button hlmTabsTrigger="depot"
              class="text-xs font-bold py-1.5 data-[state=active]:bg-emerald-500 data-[state=active]:text-white transition-all">
        Dépôt
      </button>
      <button hlmTabsTrigger="retrait"
              class="text-xs font-bold py-1.5 data-[state=active]:bg-emerald-500 data-[state=active]:text-white transition-all">
        Retrait
      </button>
      <button hlmTabsTrigger="virement"
              class="text-xs font-bold py-1.5 data-[state=active]:bg-emerald-500 data-[state=active]:text-white transition-all">
        Virement
      </button>
    </hlm-tabs-list>


    <div hlmTabsContent="depot" class="mt-6 space-y-6">

      <div class="flex items-center gap-2">
        <div class="flex-1">
          <brn-select formControlName="CompteSource" placeholder="Choisir un compte">
            <hlm-select-trigger
              class="w-full h-auto p-2 border border-slate-100 rounded-lg bg-slate-50/50 flex items-center gap-2 outline-none">

              <div class="flex-1 text-left min-w-0">
                <p class="text-[9px] text-slate-400 font-bold leading-none mb-1 uppercase">DE</p>
                <hlm-select-value class="text-xs font-bold text-slate-900 truncate"/>
              </div>


            </hlm-select-trigger>

            <hlm-select-content class="bg-white border-slate-200">
              <hlm-option value="chase" class="flex items-center gap-2">
                <lucide-icon name="landmark" size="12" class="mr-2"></lucide-icon>
                Chase Bank ...8899
              </hlm-option>
              <hlm-option value="momo" class="flex items-center gap-2 text-yellow-600">
                <lucide-icon name="smartphone" size="12" class="mr-2"></lucide-icon>
                Mobile Money
              </hlm-option>
              <hlm-option value="wave" class="flex items-center gap-2 text-blue-500">
                <lucide-icon name="waves" size="12" class="mr-2"></lucide-icon>
                Wave
              </hlm-option>
            </hlm-select-content>
          </brn-select>
        </div>

        <lucide-icon name="arrow-right" class="text-slate-300" size="16"></lucide-icon>

        <div class="flex-1 p-2 border border-slate-100 rounded-lg flex items-center gap-2 bg-white">
          <lucide-icon name="search" size="14" class="text-slate-400 ml-1"></lucide-icon>
          <input type="text"
                 class="w-full bg-transparent border-none text-xs focus:ring-0 p-0 placeholder:text-slate-300"
                 placeholder="Numéro ou Email">
          <lucide-icon name="chevron-down" size="14" class="text-slate-400"></lucide-icon>
        </div>
      </div>


      <div class="text-center space-y-1">
        <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Entrer le Montant</p>

        <div class="flex items-center justify-center gap-2">

          <div class="inline-grid items-center justify-items-center">

            <span class="invisible col-start-1 row-start-1 px-1 text-3xl font-black whitespace-pre">
        {{ form.get('montant')?.value || '0.00' }}
      </span>


            <input type="number"
                   formControlName="montant"
                   class="col-start-1 row-start-1 w-full text-3xl font-black text-slate-900 border-none focus:ring-0 text-center p-0 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"
                   placeholder="0.00">
          </div>

          <span class="text-2xl font-black text-emerald-500">FCFA</span>
        </div>
      </div>

      <!-- Boutons Rapides -->
      <div class="flex flex-wrap justify-center gap-1.5 mt-4">
        <button type="button" (click)="setAmount(5000)"
                class="px-3 py-1 rounded-md border border-slate-100 bg-slate-50 text-[10px] font-bold text-slate-500 hover:bg-emerald-50 hover:text-emerald-600 transition-all">
          +5.000
        </button>
        <button type="button" (click)="setAmount(10000)"
                class="px-3 py-1 rounded-md border border-slate-100 bg-slate-50 text-[10px] font-bold text-slate-500 hover:bg-emerald-50 hover:text-emerald-600 transition-all">
          +10.000
        </button>
        <button type="button" (click)="setAmount(50000)"
                class="px-3 py-1 rounded-md border border-slate-100 bg-slate-50 text-[10px] font-bold text-slate-500 hover:bg-emerald-50 hover:text-emerald-600 transition-all">
          +50.000
        </button>
        <button type="button" (click)="setAmount(0)"
                class="px-3 py-1 rounded-md border border-slate-100 bg-slate-50 text-[10px] font-bold text-slate-500 hover:bg-red-50 hover:text-red-600 transition-all">
          EFFACER
        </button>
      </div>

      <!-- Frais (Plus dense) -->
      <div class="space-y-2 pt-3 border-t border-slate-50">
        <div class="flex justify-between text-[11px]">
          <span class="text-slate-400 font-medium">Frais de traitement</span>
          <span class="text-emerald-600 font-bold">Gratuit</span>
        </div>
        <div class="flex justify-between text-[11px]">
          <span class="text-slate-400 font-medium">Délai</span>
          <span class="text-slate-900 font-bold">Instantané</span>
        </div>
      </div>

      <!-- Bouton Action (Taille optimisée) -->
      <div class="space-y-3 pt-2">
        <button hlmBtn
                class="w-full h-11 bg-emerald-500 hover:bg-emerald-600 text-white rounded-lg text-sm font-bold shadow-md shadow-emerald-50 transition-all">
          Confirmer le Dépôt
        </button>
        <p class="text-[9px] text-center text-slate-400 px-4">
          En cliquant, vous acceptez nos <span class="underline cursor-pointer">Conditions d'Utilisation</span>.
        </p>
      </div>
    </div>
  </hlm-tabs>
</div>
